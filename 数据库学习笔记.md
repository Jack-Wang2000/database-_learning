# 数据库学习笔记

本文是数据库系统概念一书的学习笔记

##  第一章  基本概念



## 第二章  关系模型

### 2.1  关系数据库的结构

- 关系数据库=表的集合

- 表=元组的集合

- **表可以由关系来理解**

  *关系为一个抽象的概念提供了某种具象化描述，规定满足某些条件的集合为···关系*

  *而表也是用一系列属性来表示某一个概念*

- 元组=行

- 属性=列

  - 域(domain)=属性规定允许的取值集合

    *域是原子的，即域中的元素不可再分*

### 2.2   数据库模式：

定义：数据库的逻辑设计

| 数据库概念  | 程序设计概念 |
| :---------: | :----------: |
|   ` 关系`   |   ` 变量`    |
| ` 关系模式` | ` 类型定义`  |
| ` 关系实例` | ` 变量的值`  |

在程序设计语言中：

- 一个变量可能有类型 地址 地址对应物理空间的值
- 类型定义了这个变量有哪些部分，值域，可以做的操作
- 变量的值在系统运行中是可变化的

在数据库中，一个表可能有表示的内容 存储地址 以及表示的内容

- 一个表(关系)可能有包含的内容(DDL) 对他可以做的操作(DML) 值(元组集合)
- 而关系模式——***表的逻辑设计***，定义了该关系有哪些属性 属性的域 可以做什么操作——
- 关系实例表某一瞬间的一个元组集合 

### 2.3  键(key)

- 超键

  能唯一区分一个元组的属性集合

- 候选键

  能唯一区分一个元组的*最小*属性集合

- 主键

  某一个候选键

  ***选择要求：主键必须选择极少变化的值***

- 外键

  A关系的某个属性是B关系的主键，该属性是A的**外键**

  则**A参照B**，意味着*A的信息需要参照B才能得以表达*

  A是**参照关系**，B是**被参照关系**

  ![image-20211202161914974](C:\Users\汪杰\AppData\Roaming\Typora\typora-user-images\image-20211202161914974.png)

  

### 2.4  关系查询语言

定义：用户用来从数据库中请求获取信息的语言

过程化语言：用户指导系统对数据库执行一系列操作以计算出所需结果

非过程化语言：只需要描述信息，不需给出过程

### 2. 5  关系运算

定义：施加于单个或一对关系上，得到的结果是单个关系

- 选择
- 投影
- 自然连接
- 笛卡尔乘积
- 并

## 第三章  SQL基本DML和DDL

### 3.1 database操作

```sql
show databases;  		
use database;					//修改当前使用的数据库
create database name;
drop database name;
```

### 3.2   数据定义(DDL)

SQL的DDL可以定义：

- 关系的模式
- 每个属性的取值类型
- 完整性约束
- 关系维护的索引集合
- 关系的安全性和权限信息
- 关系在磁盘上的物理结构

#### 3.2.1  基本类型

- int==integer
- numeric(p,d):定点数，p d为小数点前后的位数，
- smallint
- float(n)
- read,double precision:
- char(n):长度为n的字符串
- varchar(n):可变长度字符串，n为最大长度

#### 3.2.2 模式定义

1. 定义表：	

   ```sql
   create table 表名(
   属性名 域(类型) <not null>,
   ...
   属性名 域(类型) <not null>,
   <完整性约束>,...<完整性约束>);
   ```

2. 对表的模式进行操作

   ```sql
   show tables;				 //查看有哪些表
   delete table 表名;			//清空表，但不删除该关系
   drop table 表名;				//删除整个关系
   alter table 表名 add 属性名 域; //添加属性
   alter table 表名 drop 属性名;   //删除属性
   ```

3. 元组操作


   ```sql
   insert into 表名
   values(A1,A2...An);//输入满足属性域的量
   ```

### 3.3  SQL查询语句

#### 3.3.1 单关系查询